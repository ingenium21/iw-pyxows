PS C:\Program Files\Grafana Agent> .\agent-windows-amd64.exe -config.file .\agent-config.yaml > error.txt
flag provided but not defined: -config
Usage of C:\Program Files\Grafana Agent\agent-windows-amd64.exe:
  -config.enable-read-api
        Enables the /-/config and /agent/api/v1/configs/{name} APIs. Be aware that secrets could be exposed by enabling these endpoints!
  -config.expand-env
        Expands ${var} in config according to the values of the environment variables.
  -config.file string
        configuration file to load
  -config.file.type string
        Type of file pointed to by -config.file flag. Supported values: yaml, dynamic. dynamic requires dynamic-config and integrations-next features to be enabled. (default "yaml")
  -config.url.basic-auth-password-file string
        path to file containing basic auth password for fetching remote config. (requires remote-configs experiment to be enabled
  -config.url.basic-auth-user string
        basic auth username for fetching remote config. (requires remote-configs experiment to be enabled
  -disable-reporting
        Disable reporting of enabled feature flags to Grafana.
  -enable-features value
        Comma-delimited list of features to enable. Valid values: remote-configs, integrations-next, dynamic-config, extra-scrape-metrics
  -metrics.instance-restart-backoff duration
        how long to wait before restarting a failed Prometheus instance (default 5s)
  -metrics.service-client.backoff-max-period duration
        Maximum delay when backing off. (default 10s)
  -metrics.service-client.backoff-min-period duration
        Minimum delay when backing off. (default 100ms)
  -metrics.service-client.backoff-on-ratelimits
        Enable backoff and retry when we hit ratelimits.
  -metrics.service-client.backoff-retries int
        Number of times to backoff and retry before failing. (default 10)
  -metrics.service-client.grpc-client-rate-limit float
        Rate limit for gRPC client; 0 means disabled.
  -metrics.service-client.grpc-client-rate-limit-burst int
        Rate limit burst for gRPC client.
  -metrics.service-client.grpc-compression string
        Use compression when sending messages. Supported values are: 'gzip', 'snappy' and '' (disable compression)
  -metrics.service-client.grpc-max-recv-msg-size int
        gRPC client max receive message size (bytes). (default 104857600)
  -metrics.service-client.grpc-max-send-msg-size int
        gRPC client max send message size (bytes). (default 104857600)
  -metrics.service-client.tls-ca-path string
        Path to the CA certificates file to validate server certificate against. If not set, the host's root CA certificates are used.
  -metrics.service-client.tls-cert-path string
        Path to the client certificate file, which will be used for authenticating with the server. Also requires the key path to be configured.
  -metrics.service-client.tls-enabled
        Enable TLS in the GRPC client. This flag needs to be enabled when any other TLS flag is set. If set to false, insecure connection to gRPC server will be used.
  -metrics.service-client.tls-insecure-skip-verify
        Skip validating server certificate.
  -metrics.service-client.tls-key-path string
        Path to the key file for the client certificate. Also requires the client certificate to be configured.
  -metrics.service-client.tls-server-name string
        Override the expected name on the server certificate.
  -metrics.service.availability-zone string
        The availability zone where this instance is running.
  -metrics.service.backoff-max-period duration
        Maximum delay when backing off. (default 10s)
  -metrics.service.backoff-min-period duration
        Minimum delay when backing off. (default 100ms)
  -metrics.service.backoff-on-ratelimits
        Enable backoff and retry when we hit ratelimits.
  -metrics.service.backoff-retries int
        Number of times to backoff and retry before failing. (default 10)
  -metrics.service.cluster-reshard-event-timeout duration
        timeout for the cluster reshard. Timeout of 0s disables timeout. (default 30s)
  -metrics.service.config-store.consul.acl-token value
        ACL Token used to interact with Consul.
  -metrics.service.config-store.consul.cas-retry-delay duration
        Maximum duration to wait before retrying a Compare And Swap (CAS) operation. (default 1s)
  -metrics.service.config-store.consul.client-timeout duration
        HTTP timeout when talking to Consul (default 20s)
  -metrics.service.config-store.consul.consistent-reads
        Enable consistent reads to Consul.
  -metrics.service.config-store.consul.hostname string
        Hostname and port of Consul. (default "localhost:8500")
  -metrics.service.config-store.consul.watch-burst-size int
        Burst size used in rate limit. Values less than 1 are treated as 1. (default 1)
  -metrics.service.config-store.consul.watch-rate-limit float
        Rate limit when watching key or prefix in Consul, in requests per second. 0 disables the rate limit. (default 1)
  -metrics.service.config-store.etcd.dial-timeout duration
        The dial timeout for the etcd connection. (default 10s)
  -metrics.service.config-store.etcd.endpoints value
        The etcd endpoints to connect to.
  -metrics.service.config-store.etcd.max-retries int
        The maximum number of retries to do for failed ops. (default 10)
  -metrics.service.config-store.etcd.password value
        Etcd password.
  -metrics.service.config-store.etcd.tls-ca-path string
        Path to the CA certificates file to validate server certificate against. If not set, the host's root CA certificates are used.
  -metrics.service.config-store.etcd.tls-cert-path string
        Path to the client certificate file, which will be used for authenticating with the server. Also requires the key path to be configured.
  -metrics.service.config-store.etcd.tls-enabled
        Enable TLS.
  -metrics.service.config-store.etcd.tls-insecure-skip-verify
        Skip validating server certificate.
  -metrics.service.config-store.etcd.tls-key-path string
        Path to the key file for the client certificate. Also requires the client certificate to be configured.
  -metrics.service.config-store.etcd.tls-server-name string
        Override the expected name on the server certificate.
  -metrics.service.config-store.etcd.username string
        Etcd username.
  -metrics.service.config-store.multi.mirror-enabled
        Mirror writes to secondary store.
  -metrics.service.config-store.multi.mirror-timeout duration
        Timeout for storing value to secondary store. (default 2s)
  -metrics.service.config-store.multi.primary string
        Primary backend storage used by multi-client.
  -metrics.service.config-store.multi.secondary string
        Secondary backend storage used by multi-client.
  -metrics.service.config-store.prefix string
        The prefix for the keys in the store. Should end with a /. (default "configurations/")
  -metrics.service.config-store.store string
        Backend storage to use for the ring. Supported values are: consul, etcd, inmemory, memberlist, multi. (default "consul")
  -metrics.service.consul.acl-token value
        ACL Token used to interact with Consul.
  -metrics.service.consul.cas-retry-delay duration
        Maximum duration to wait before retrying a Compare And Swap (CAS) operation. (default 1s)
  -metrics.service.consul.client-timeout duration
        HTTP timeout when talking to Consul (default 20s)
  -metrics.service.consul.consistent-reads
        Enable consistent reads to Consul.
  -metrics.service.consul.hostname string
        Hostname and port of Consul. (default "localhost:8500")
  -metrics.service.consul.watch-burst-size int
        Burst size used in rate limit. Values less than 1 are treated as 1. (default 1)
  -metrics.service.consul.watch-rate-limit float
        Rate limit when watching key or prefix in Consul, in requests per second. 0 disables the rate limit. (default 1)
  -metrics.service.distributor.excluded-zones value
        Comma-separated list of zones to exclude from the ring. Instances in excluded zones will be filtered out from the ring.
  -metrics.service.distributor.replication-factor int
        The number of ingesters to write to and read from. (default 3)
  -metrics.service.distributor.zone-awareness-enabled
        True to enable the zone-awareness and replicate ingested samples across different availability zones.
  -metrics.service.enabled
        enables the scraping service mode
  -metrics.service.etcd.dial-timeout duration
        The dial timeout for the etcd connection. (default 10s)
  -metrics.service.etcd.endpoints value
        The etcd endpoints to connect to.
  -metrics.service.etcd.max-retries int
        The maximum number of retries to do for failed ops. (default 10)
  -metrics.service.etcd.password value
        Etcd password.
  -metrics.service.etcd.tls-ca-path string
        Path to the CA certificates file to validate server certificate against. If not set, the host's root CA certificates are used.
  -metrics.service.etcd.tls-cert-path string
        Path to the client certificate file, which will be used for authenticating with the server. Also requires the key path to be configured.
  -metrics.service.etcd.tls-enabled
        Enable TLS.
  -metrics.service.etcd.tls-insecure-skip-verify
        Skip validating server certificate.
  -metrics.service.etcd.tls-key-path string
        Path to the key file for the client certificate. Also requires the client certificate to be configured.
  -metrics.service.etcd.tls-server-name string
        Override the expected name on the server certificate.
  -metrics.service.etcd.username string
        Etcd username.
  -metrics.service.final-sleep duration
        Duration to sleep for before exiting, to ensure metrics are scraped.
  -metrics.service.grpc-client-rate-limit float
        Rate limit for gRPC client; 0 means disabled.
  -metrics.service.grpc-client-rate-limit-burst int
        Rate limit burst for gRPC client.
  -metrics.service.grpc-compression string
        Use compression when sending messages. Supported values are: 'gzip', 'snappy' and '' (disable compression)
  -metrics.service.grpc-max-recv-msg-size int
        gRPC client max receive message size (bytes). (default 104857600)
  -metrics.service.grpc-max-send-msg-size int
        gRPC client max send message size (bytes). (default 104857600)
  -metrics.service.heartbeat-period duration
        Period at which to heartbeat to consul. 0 = disabled. (default 5s)
  -metrics.service.heartbeat-timeout duration
        Heartbeat timeout after which instance is assumed to be unhealthy. 0 = disabled. (default 1m0s)
  -metrics.service.join-after duration
        Period to wait for a claim from another member; will join automatically after this.
  -metrics.service.lifecycler.ID string
        ID to register in the ring. (default "IronCareLabPC")
  -metrics.service.lifecycler.addr string
        IP address to advertise in the ring.
  -metrics.service.lifecycler.interface value
        Name of network interface to read address from. (default [Ethernet])
  -metrics.service.lifecycler.port int
        port to advertise in consul (defaults to server.grpc-listen-port).
  -metrics.service.min-ready-duration duration
        Minimum duration to wait after the internal readiness checks have passed but before succeeding the readiness endpoint. This is used to slowdown deployment controllers (eg. Kubernetes) after an instance is ready and before they proceed with a rolling update, to give the rest of the cluster instances enough time to receive ring updates. (default 15s)
  -metrics.service.multi.mirror-enabled
        Mirror writes to secondary store.
  -metrics.service.multi.mirror-timeout duration
        Timeout for storing value to secondary store. (default 2s)
  -metrics.service.multi.primary string
        Primary backend storage used by multi-client.
  -metrics.service.multi.secondary string
        Secondary backend storage used by multi-client.
  -metrics.service.num-tokens int
        Number of tokens for each ingester. (default 128)
  -metrics.service.observe-period duration
        Observe tokens after generating to resolve collisions. Useful when using gossiping ring.
  -metrics.service.prefix string
        The prefix for the keys in the store. Should end with a /. (default "collectors/")
  -metrics.service.readiness-check-ring-health
        When enabled the readiness probe succeeds only after all instances are ACTIVE and healthy in the ring, otherwise only the instance itself is checked. This option should be disabled if in your cluster multiple instances can be rolled out simultaneously, otherwise rolling updates may be slowed down. (default true)
  -metrics.service.reshard-interval duration
        how often to manually refresh configuration (default 1m0s)
  -metrics.service.reshard-timeout duration
        timeout for refreshing the configuration. Timeout of 0s disables timeout. (default 30s)
  -metrics.service.ring.heartbeat-timeout duration
        The heartbeat timeout after which ingesters are skipped for reads/writes. 0 = never (timeout disabled). (default 1m0s)
  -metrics.service.store string
        Backend storage to use for the ring. Supported values are: consul, etcd, inmemory, memberlist, multi. (default "consul")
  -metrics.service.tls-ca-path string
        Path to the CA certificates file to validate server certificate against. If not set, the host's root CA certificates are used.
  -metrics.service.tls-cert-path string
        Path to the client certificate file, which will be used for authenticating with the server. Also requires the key path to be configured.
  -metrics.service.tls-enabled
        Enable TLS in the GRPC client. This flag needs to be enabled when any other TLS flag is set. If set to false, insecure connection to gRPC server will be used.
  -metrics.service.tls-insecure-skip-verify
        Skip validating server certificate.
  -metrics.service.tls-key-path string
        Path to the key file for the client certificate. Also requires the client certificate to be configured.
  -metrics.service.tls-server-name string
        Override the expected name on the server certificate.
  -metrics.service.tokens-file-path string
        File path where tokens are stored. If empty, tokens are not stored at shutdown and restored at startup.
  -metrics.service.unregister-on-shutdown
        Unregister from the ring upon clean shutdown. It can be useful to disable for rolling restarts with consistent naming in conjunction with -distributor.extend-writes=false. (default true)
  -metrics.wal-cleanup-age duration
        remove abandoned (unused) WALs older than this (default 12h0m0s)
  -metrics.wal-cleanup-period duration
        how often to check for abandoned WALs (default 30m0s)
  -metrics.wal-directory string
        base directory to store the WAL in (default "data-agent/")
  -server.graceful-shutdown-timeout duration
        Timeout for a graceful server shutdown (default 30s)
  -server.grpc.address string
        gRPC server listen host:port. Takes precedence over YAML listen flags when set. (default "127.0.0.1:12346")
  -server.grpc.conn-limit int
        Maximum number of simultaneous gRPC connections (0 = unlimited)
  -server.grpc.enable-tls
        Enable TLS for the gRPC server.
  -server.grpc.in-memory-addr string
        Address used to internally make in-memory requests to the gRPC server. Override if it collides with a real URL. (default "agent.internal:12346")
  -server.grpc.keepalive.max-connection-age duration
        Maximum age for any gRPC connection for a graceful shutdown (default 2562047h47m16.854775807s)
  -server.grpc.keepalive.max-connection-age-grace duration
        Grace period to forceibly close connections after a graceful shutdown starts (default 2562047h47m16.854775807s)
  -server.grpc.keepalive.max-connection-idle duration
        Time to wait before closing idle gRPC connections (default 2562047h47m16.854775807s)
  -server.grpc.keepalive.min-time-between-pings duration
        Maximum frequency that clients may send pings at (default 5m0s)
  -server.grpc.keepalive.ping-without-stream-allowed
        Allow clients to send pings without having a gRPC stream
  -server.grpc.keepalive.time duration
        Frequency to send keepalive pings from the server (default 2h0m0s)
  -server.grpc.keepalive.timeout duration
        How long to wait for a keepalive pong before closing the connection (default 20s)
  -server.grpc.max-concurrent-streams uint
        Maximum number of concurrent gRPC streams (0 = unlimited) (default 100)
  -server.grpc.max-recv-msg-size-bytes int
        Maximum size in bytes for received gRPC messages (default 4194304)
  -server.grpc.max-send-msg-size-bytes int
        Maximum size in bytes for send gRPC messages (default 4194304)
  -server.grpc.network string
        gRPC server listen network (default "tcp")
  -server.http.address string
        HTTP server listen host:port. Takes precedence over YAML listen flags when set. (default "127.0.0.1:12345")
  -server.http.conn-limit int
        Maximum number of simultaneous HTTP connections (0 = unlimited)
  -server.http.enable-tls
        Enable TLS for the HTTP server.
  -server.http.idle-timeout duration
        HTTP server idle timeout (default 2m0s)
  -server.http.in-memory-addr string
        Address used to internally make in-memory requests to the HTTP server. Override if it collides with a real URL. (default "agent.internal:12345")
  -server.http.network string
        HTTP server listen network (default "tcp")
  -server.http.read-timeout duration
        HTTP server read timeout (default 30s)
  -server.http.write-timeout duration
        HTTP server write timeout (default 30s)
  -server.log.source-ips.enabled
        Log IP address of client for incoming requests
  -server.log.source-ips.header string
        Header field storing the source IPs. Only used if server.log-source-ips-enabled is true. Defaults to Forwarded, X-Real-IP, and X-Forwarded-For
  -server.log.source-ips.regex string
        Regex for extracting the source IPs from the matched header. The first capture group will be used for the extracted IP address. Only used if server.log-source-ips-enabled is true.
  -server.register-instrumentation
        Register the intrumentation handlers (e.g., /metrics) (default true)
  -version
        Print this build's version information.